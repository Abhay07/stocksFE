(function(t){function e(e){for(var a,r,l=e[0],i=e[1],c=e[2],d=0,g=[];d<l.length;d++)r=l[d],n[r]&&g.push(n[r][0]),n[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);u&&u(e);while(g.length)g.shift()();return s.push.apply(s,c||[]),o()}function o(){for(var t,e=0;e<s.length;e++){for(var o=s[e],a=!0,l=1;l<o.length;l++){var i=o[l];0!==n[i]&&(a=!1)}a&&(s.splice(e--,1),t=r(r.s=o[0]))}return t}var a={},n={app:0},s=[];function r(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=a,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(o,a,function(e){return t[e]}.bind(null,a));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/stocksFE/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=i;s.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var a=o("64a9"),n=o.n(a);n.a},"1be4":function(t,e,o){},4639:function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("f751"),o("097d");var a=o("2b0e"),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[t.isLoggedIn?o("Dashboard",{attrs:{toggleAlert:t.toggleAlert,toggleProgress:t.toggleProgress}}):t._e(),t.isLoggedIn?t._e():o("Login",{attrs:{toggleAlert:t.toggleAlert,toggleProgress:t.toggleProgress,setLoggedInUser:t.setLoggedInUser}}),t.showProgress?o("Progress"):t._e(),t.showAlert?o("Alert",{attrs:{isInfoAlert:t.isInfoAlert,hideAlert:t.hideAlert,label:t.alertMsg}}):t._e()],1)},s=[],r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Header",{attrs:{cashBalance:t.cashBalance,toggleAlert:t.toggleAlert,toggleProgress:t.toggleProgress,openModal:t.openModal}}),o("Search",{attrs:{toggleAlert:t.toggleAlert,toggleProgress:t.toggleProgress,openModal:t.openModal}}),o("TabularData",{attrs:{stocksData:t.stocksData,toggleAlert:t.toggleAlert,toggleProgress:t.toggleProgress,openModal:t.openModal}}),t.showModal?o("Modal",{attrs:{hideModal:t.hideModal,toggleAlert:t.toggleAlert,toggleProgress:t.toggleProgress,setCashBalance:t.setCashBalance,type:t.modalType,cashBalance:t.cashBalance,modalData:t.modalData,getPortfolio:t.getPortfolio}}):t._e()],1)},l=[],i=o("bd86"),c=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"header"},[t._v("\n    Stocks Portfolio\n  ")]),o("div",{staticClass:"sub-header"},[t._v("\n      Cash Balance: "),o("b",[t._v(" "+t._s(t.formattedBalance)+" ")]),o("button",{on:{click:function(e){return t.openModal({type:t.modalTypes.ADDBALANCE})}}},[t._v("Add Balance")]),o("button",{on:{click:function(e){return t.openModal({type:t.modalTypes.REMOVEBALANCE})}}},[t._v("Remove Balance")])])])},u=[],d=(o("c5f6"),"https://api.abhaysrivastav.net/stock"),g={login:"".concat(d,"/login"),register:"".concat(d,"/register"),balance:"".concat(d,"/balance"),stock:"".concat(d,"/stock")},p={modalTypes:{BUY:0,SELL:1,ADDBALANCE:2,REMOVEBALANCE:3}},h=p.modalTypes,f={props:{cashBalance:Number,toggleAlert:Function,toggleProgress:Function,openModal:Function},data:function(){return{modalTypes:h}},computed:{formattedBalance:function(){return this.cashBalance?this.cashBalance.toFixed(2):"NA"}}},m=f,v=(o("da4c"),o("2877")),b=Object(v["a"])(m,c,u,!1,null,null,null),k=b.exports,y=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.stocksData&&t.stocksData.length>0?o("div",[t._m(0),t._l(t.stocksData,function(e){return o("div",{staticClass:"data-row"},[o("span",[t._v(t._s(e.name))]),o("span",[t._v(t._s(e.count))]),o("span",{on:{click:function(o){return t.getPrice(e)}}},[o("button",[t._v("Sell")])])])})],2):o("div",{staticClass:"data-row bordered"},[o("span",[t._v("No Stocks in portfolio")])])])},A=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"data-row heading"},[o("span",[t._v("Stock Name")]),o("span",[t._v("Count")]),o("span")])}],P=(o("7f7f"),o("bc3a")),_=o.n(P);function w(){var t=window.localStorage.getItem("token")||"",e={headers:{"access-token":t,"Content-type":"application/json"}};return e}function C(t,e){return _.a.post(g.login,{username:t,password:e})}function N(t,e,o){return _.a.post(g.register,{username:t,password:e,name:o})}function B(t){var e=g.balance;return t&&(e+=t),_.a.get(e,w())}function S(){return _.a.get(g.stock,w())}function x(t){var e="".concat(g.balance);return _.a.put(e,t,w())}function L(t){return _.a.get("".concat(g.stock,"/search?symbol=").concat(t),w())}function T(t){return _.a.get("".concat(g.stock,"/").concat(t),w())}function M(t){return _.a.put("".concat(g.stock,"?type=BUY"),t,w())}function D(t){return _.a.put("".concat(g.stock,"?type=SELL"),t,w())}var F,I=p.modalTypes,E={props:{stocksData:Array,openModal:Function,toggleProgress:Function,toggleAlert:Function},methods:{getPrice:function(t){var e=this,o=t.name;this.toggleProgress(),T(o).then(function(o){if(!o.data["Global Quote"])throw"";var a=o.data["Global Quote"];a.availableStock=t.count,e.openModal({type:I.SELL,data:o.data["Global Quote"]})}).catch(function(t){e.toggleAlert(t.error||"Cannot get price")}).finally(function(t){e.toggleProgress()})}}},O=E,j=(o("81d5"),Object(v["a"])(O,y,A,!1,null,null,null)),V=j.exports,$=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"searchWrapper"},[o("strong",[t._v("Search Stocks")]),o("div",{staticClass:"searchContainer"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],attrs:{type:"text",placeholder:"Type Stock name e.g. Microsoft"},domProps:{value:t.searchText},on:{input:[function(e){e.target.composing||(t.searchText=e.target.value)},t.inputHandler]}}),o("span",[t._v("🔍")]),t.loadingText?o("ul",{staticClass:"searchList"},[o("li",[t._v(t._s(t.loadingText))])]):!t.loadingText&&t.stocksList?o("ul",{staticClass:"searchList"},t._l(t.stocksList,function(e){return o("li",{on:{click:function(o){return t.selectStock(e)}}},[t._v(t._s(e["1. symbol"]+" "+e["2. name"]))])}),0):t._e()])])},R=[],U=p.modalTypes,G={props:{toggleAlert:Function,toggleProgress:Function,openModal:Function},data:function(){return{stocksList:null,callAllowed:!0,searchText:null,loadingText:null,typeTimer:null,modalTypes:U}},created:function(){var t=this;document.addEventListener("click",function(e){e.stopPropagation(),t.stocksList=null})},methods:{inputHandler:function(){var t=this;this.searchText.length>2&&(clearTimeout(this.typeTimer),this.typeTimer=setTimeout(function(){t.loadingText="Searching",L(t.searchText).then(function(e){e.data&&e.data.bestMatches?(t.stocksList=e.data.bestMatches,t.loadingText=null):t.loadingText="Stock cannot be found"}).catch(function(e){t.loadingText="Stock cannot be found"})},1e3))},selectStock:function(t){var e=this,o=t["1. symbol"];this.toggleProgress(),T(o).then(function(t){if(!t.data["Global Quote"])throw"";e.openModal({type:U.BUY,data:t.data["Global Quote"]}),e.stocksList=null}).catch(function(t){e.toggleAlert(t.error||"Cannot get price")}).finally(function(t){e.toggleProgress()})}}},Q=G,Y=(o("a444"),Object(v["a"])(Q,$,R,!1,null,null,null)),H=Y.exports,z=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"overlay",on:{click:t.hideModal}},[t.type==t.modalTypes.BUY?o("form",{attrs:{id:"modal-form"},on:{click:t.stopPropagate,submit:t.preventDefault}},[o("span",[t._v("Buy Stocks")]),o("span",{staticClass:"label"},[t._v("Name")]),o("input",{attrs:{type:"text",placeholder:"Stock Name",readonly:""},domProps:{value:t.modalData["01. symbol"]}}),o("span",{staticClass:"label"},[t._v("Current price per stock")]),o("input",{attrs:{type:"text",placeholder:"Stock Name",readonly:""},domProps:{value:t.modalData["05. price"]}}),o("span",{staticClass:"label"},[t._v("No. of stocks to buy")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.stockCount,expression:"stockCount"}],attrs:{type:"number",placeholder:"No. of Stocks"},domProps:{value:t.stockCount},on:{input:function(e){e.target.composing||(t.stockCount=e.target.value)}}}),o("button",{on:{click:t.buyStock}},[t._v("Submit")])]):t.type==t.modalTypes.SELL?o("form",{attrs:{id:"modal-form"},on:{click:t.stopPropagate,submit:t.preventDefault}},[o("span",[t._v("Sell Stocks")]),o("span",{staticClass:"label"},[t._v("Name")]),o("input",{attrs:{type:"text",placeholder:"Stock Name",readonly:""},domProps:{value:t.modalData["01. symbol"]}}),o("span",{staticClass:"label"},[t._v("Current price per stock")]),o("input",{attrs:{type:"text",placeholder:"Stock Name",readonly:""},domProps:{value:t.modalData["05. price"]}}),o("span",{staticClass:"label"},[t._v("No. of stocks to sell")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.stockCount,expression:"stockCount"}],attrs:{type:"number",placeholder:"No. of Stocks"},domProps:{value:t.stockCount},on:{input:function(e){e.target.composing||(t.stockCount=e.target.value)}}}),o("button",{on:{click:t.sellStock}},[t._v("Submit")])]):t.type==t.modalTypes.ADDBALANCE?o("form",{attrs:{id:"modal-form"},on:{click:t.stopPropagate,submit:t.preventDefault}},[o("span",[t._v("Add Balance")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.balanceInput,expression:"balanceInput"}],attrs:{type:"text",placeholder:"Type Amount",name:"mealname"},domProps:{value:t.balanceInput},on:{input:function(e){e.target.composing||(t.balanceInput=e.target.value)}}}),o("button",{on:{click:t.addBalance}},[t._v("Submit")])]):t.type==t.modalTypes.REMOVEBALANCE?o("form",{attrs:{id:"modal-form"},on:{click:t.stopPropagate,submit:t.preventDefault}},[o("span",[t._v("Remove Balance")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.balanceInput,expression:"balanceInput"}],attrs:{type:"text",placeholder:"Type Amount",name:"mealname"},domProps:{value:t.balanceInput},on:{input:function(e){e.target.composing||(t.balanceInput=e.target.value)}}}),o("button",{on:{click:t.removeBalance}},[t._v("Submit")])]):t._e()])},J=[],Z=p.modalTypes,W={props:{hideModal:Function,toggleAlert:Function,toggleProgress:Function,getMeals:Function,selectedMeal:Object,setCashBalance:Function,type:Number,cashBalance:Number,modalData:Object,getPortfolio:Function},created:function(){this.type==Z.SELL&&(this.stockCount=this.modalData.availableStock)},data:function(){return{balanceInput:0,modalTypes:Z,stockCount:1}},computed:{updatedAddBalance:function(){return Number(this.cashBalance)+Number(this.balanceInput)},updatedRemoveBalance:function(){return Number(this.cashBalance)-Number(this.balanceInput)}},methods:{stopPropagate:function(t){t.stopPropagation()},preventDefault:function(t){t.preventDefault()},addBalance:function(){var t=this;isNaN(this.balanceInput)||this.balanceInput<=0?this.toggleAlert("Please add valid balance"):(this.toggleProgress(),x({balance:this.updatedAddBalance}).then(function(e){t.toggleAlert("Balance added successfully",!0),t.setCashBalance(t.updatedAddBalance),t.hideModal()}).catch(function(e){t.toggleAlert(e.response&&e.response.data&&e.response.data.error||"Balance could not be updated")}).finally(function(e){t.toggleProgress()}))},removeBalance:function(){var t=this;isNaN(this.balanceInput)||this.balanceInput<=0?this.toggleAlert("Please add valid balance"):this.balanceInput>this.cashBalance?this.toggleAlert("Insufficient Balance"):(this.toggleProgress(),x({balance:this.updatedRemoveBalance}).then(function(e){t.toggleAlert("Balance removed successfully",!0),t.setCashBalance(t.updatedRemoveBalance),t.hideModal()}).catch(function(e){t.toggleAlert(e.response&&e.response.data&&e.response.data.error||"Balance could not be updated")}).finally(function(e){t.toggleProgress()}))},buyStock:function(){var t=this;if(isNaN(this.stockCount)||this.stockCount<1)this.toggleAlert("Please enter valid stock count");else if(Number(this.stockCount)>Number(this.modalData["06. volume"]))this.toggleAlert("Please enter lesser stocks to buy");else{var e={name:this.modalData["01. symbol"],count:Number(this.stockCount)};this.toggleProgress(),M(e).then(function(e){t.getPortfolio(),t.toggleAlert("Stock bought successfully",!0),t.hideModal()}).catch(function(e){t.toggleAlert(e.response&&e.response.data&&e.response.data.error||"Stock could not be bought")}).finally(function(e){t.toggleProgress()})}},sellStock:function(){var t=this;if(isNaN(this.stockCount)||this.stockCount<1)this.toggleAlert("Please enter valid stock count");else if(Number(this.stockCount)>Number(this.modalData["availableStock"]))this.toggleAlert("You dont have sufficient stock");else{var e={name:this.modalData["01. symbol"],count:Number(this.stockCount)};this.toggleProgress(),D(e).then(function(e){t.getPortfolio(),t.toggleAlert("Stock sold successfully",!0),t.hideModal()}).catch(function(e){console.log(e.response),t.toggleAlert(e.response&&e.response.data&&e.response.data.error||"Stock could not be sold")}).finally(function(e){t.toggleProgress()})}}}},q=W,K=(o("e4f7"),Object(v["a"])(q,z,J,!1,null,null,null)),X=K.exports,tt=(F={components:{Header:k,TabularData:V,Modal:X,Search:H},props:{toggleAlert:Function,toggleProgress:Function},data:function(){return{modalType:null,modalData:null}},created:function(){var t=this;B().then(function(e){e.data&&e.data.balance&&(t.cashBalance=e.data.balance)}).catch(function(e){t.toggleAlert(e.error||"cannot fetch balance")}),this.getPortfolio()}},Object(i["a"])(F,"data",function(){return{cashBalance:null,showModal:!1,stocksData:null}}),Object(i["a"])(F,"methods",{setCashBalance:function(t){this.cashBalance=t},hideModal:function(){this.showModal=!1},openModal:function(t){var e=t.type,o=t.data;this.modalType=e,this.modalData=o,this.showModal=!0},getPortfolio:function(){var t=this;S().then(function(e){e.data&&e.data.portfolio&&(t.stocksData=e.data.portfolio),e.data&&e.data.balance&&(t.cashBalance=e.data.balance)}).catch(function(e){t.toggleAlert(e.response&&e.response.data&&e.response.data.error||"cannot fetch portfolio")})}}),F),et=tt,ot=(o("8360"),Object(v["a"])(et,r,l,!1,null,null,null)),at=ot.exports,nt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("form",{attrs:{id:"login-form"},on:{submit:t.preventDefault}},[o("div",{staticClass:"tabs"},[o("span",{staticClass:"left-tab",class:t.loginLabelClass,on:{click:t.showLoginForm}},[t._v("Login")]),o("span",{class:t.registerLabelClass,on:{click:t.hideLoginForm}},[t._v("Register")])]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",placeholder:"Username",name:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"text",placeholder:"Password",name:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.uName,expression:"uName"},{name:"show",rawName:"v-show",value:!t.loginFormVisible,expression:"!loginFormVisible"}],attrs:{type:"text",placeholder:"Name",name:"name"},domProps:{value:t.uName},on:{input:function(e){e.target.composing||(t.uName=e.target.value)}}}),o("button",{on:{click:t.loginOrRegister}},[t._v(t._s(t.buttonText))])])])},st=[],rt=(o("4917"),{data:function(){return{loginFormVisible:!0,username:"",password:"",uName:""}},props:{toggleAlert:Function,toggleProgress:Function,setLoggedInUser:Function},computed:{registerFormVisible:function(){return!this.loginFormVisible},loginLabelClass:function(){return this.loginFormVisible?["bold"]:[]},registerLabelClass:function(){return this.loginFormVisible?[]:["bold"]},buttonText:function(){return this.loginFormVisible?"Login":"Register"},validationError:function(){var t=/^[\w]{4,}$/;if(!this.username.match(t))return"Invalid username, should have minimum 4 characters";var e=/^[^\s]{6,}$/;if(!this.password.match(e))return"Password should have minimum 6 characters";var o=/^[A-Za-z]+[A-Za-z\s]+$/;return this.loginFormVisible||this.uName.match(o)?null:"Invalid name, should have minimum 3 character and no special characters allowed"}},methods:{showLoginForm:function(){this.loginFormVisible||(this.loginFormVisible=!0)},hideLoginForm:function(){this.loginFormVisible&&(this.loginFormVisible=!1)},loginOrRegister:function(){var t=this;this.validationError?this.toggleAlert(this.validationError):(this.toggleProgress(),this.loginFormVisible?C(this.username,this.password).then(function(e){if(e.data&&e.data.token)return window.localStorage.setItem("token",e.data.token),void t.setLoggedInUser();throw"err"}).catch(function(e){return t.toggleAlert("Check username and password")}).finally(function(){return t.toggleProgress()}):N(this.username,this.password,this.uName).then(function(e){if(e.data&&e.data.token)return t.toggleAlert("Registration successful",!0),window.localStorage.setItem("token",e.data.token),void t.setLoggedInUser();throw"err"}).catch(function(e){return t.toggleAlert("User registration failed")}).finally(function(){return t.toggleProgress()}))},preventDefault:function(t){t.preventDefault()}}}),lt=rt,it=(o("7169"),Object(v["a"])(lt,nt,st,!1,null,null,null)),ct=it.exports,ut=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:t.alertClass,attrs:{id:"alert-container"}},[o("span",[t._v(t._s(t.label))]),o("span",{attrs:{id:"cross-icon"},on:{click:t.hideAlert}},[t._v("x")])])},dt=[],gt={props:{isInfoAlert:{type:Boolean,default:!1},label:{type:String,default:"Something went wrong"},hideAlert:Function},mounted:function(){var t=this;setTimeout(function(){t.hideAlert()},2e3)},computed:{alertClass:function(){return this.isInfoAlert?["info"]:[]}}},pt=gt,ht=(o("c9da"),Object(v["a"])(pt,ut,dt,!1,null,null,null)),ft=ht.exports,mt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},vt=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"overlay"},[o("div",[o("span",{staticClass:"circle"}),o("span",{staticClass:"circle"}),o("span",{staticClass:"circle"}),o("span",{staticClass:"circle"})])])}],bt={},kt=bt,yt=(o("8d62"),Object(v["a"])(kt,mt,vt,!1,null,null,null)),At=yt.exports,Pt={name:"app",components:{Dashboard:at,Login:ct,Alert:ft,Progress:At},data:function(){return{isLoggedIn:!1,showAlert:!1,isInfoAlert:!1,showProgress:!1,alertMsg:null}},created:function(){var t=window.localStorage.getItem("token");t&&(this.isLoggedIn=!0)},methods:{toggleAlert:function(t,e){this.isInfoAlert=Boolean(e),this.alertMsg=t||null,this.showAlert=!this.showAlert},toggleProgress:function(){this.showProgress=!this.showProgress},setLoggedOutUser:function(){this.isLoggedIn=!1},setLoggedInUser:function(){this.isLoggedIn=!0},hideAlert:function(){this.showAlert=!1}}},_t=Pt,wt=(o("034f"),Object(v["a"])(_t,n,s,!1,null,null,null)),Ct=wt.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(Ct)}}).$mount("#app")},"5f67":function(t,e,o){},"64a9":function(t,e,o){},"6db8":function(t,e,o){},7169:function(t,e,o){"use strict";var a=o("5f67"),n=o.n(a);n.a},"81d5":function(t,e,o){"use strict";var a=o("6db8"),n=o.n(a);n.a},8360:function(t,e,o){"use strict";var a=o("1be4"),n=o.n(a);n.a},"8a53":function(t,e,o){},"8d62":function(t,e,o){"use strict";var a=o("4639"),n=o.n(a);n.a},a444:function(t,e,o){"use strict";var a=o("8a53"),n=o.n(a);n.a},c9da:function(t,e,o){"use strict";var a=o("cc89"),n=o.n(a);n.a},cc89:function(t,e,o){},d93b:function(t,e,o){},da4c:function(t,e,o){"use strict";var a=o("d93b"),n=o.n(a);n.a},e4f7:function(t,e,o){"use strict";var a=o("ee49"),n=o.n(a);n.a},ee49:function(t,e,o){}});
//# sourceMappingURL=app.42d9babc.js.map